<div class="header bg-gradient-danger pb-8 pt-5 pt-md-8">
  <div class="container-fluid">
    <div class="header-body">
      <!-- Card stats -->
      <div class="row">
        <div class="col-xl-3 col-lg-6">
          <div class="card card-stats mb-4 mb-xl-0">
            <div class="card-body">
              <div class="row">
                <div class="col">
                  <h5 class="card-title text-uppercase text-muted mb-0">Traffic</h5>
                  <span class="h2 font-weight-bold mb-0">350,897</span>
                </div>
                <div class="col-auto">
                  <div class="icon icon-shape bg-danger text-white rounded-circle shadow">
                    <i class="fas fa-chart-bar"></i>
                  </div>
                </div>
              </div>
              <p class="mt-3 mb-0 text-muted text-sm">
                <span class="text-success mr-2"><i class="fa fa-arrow-up"></i> 3.48%</span>
                <span class="text-nowrap">Since last month</span>
              </p>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-lg-6">
          <div class="card card-stats mb-4 mb-xl-0">
            <div class="card-body">
              <div class="row">
                <div class="col">
                  <h5 class="card-title text-uppercase text-muted mb-0">New users</h5>
                  <span class="h2 font-weight-bold mb-0">2,356</span>
                </div>
                <div class="col-auto">
                  <div class="icon icon-shape bg-warning text-white rounded-circle shadow">
                    <i class="fas fa-chart-pie"></i>
                  </div>
                </div>
              </div>
              <p class="mt-3 mb-0 text-muted text-sm">
                <span class="text-danger mr-2"><i class="fas fa-arrow-down"></i> 3.48%</span>
                <span class="text-nowrap">Since last week</span>
              </p>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-lg-6">
          <div class="card card-stats mb-4 mb-xl-0">
            <div class="card-body">
              <div class="row">
                <div class="col">
                  <h5 class="card-title text-uppercase text-muted mb-0">Sales</h5>
                  <span class="h2 font-weight-bold mb-0">924</span>
                </div>
                <div class="col-auto">
                  <div class="icon icon-shape bg-yellow text-white rounded-circle shadow">
                    <i class="fas fa-users"></i>
                  </div>
                </div>
              </div>
              <p class="mt-3 mb-0 text-muted text-sm">
                <span class="text-warning mr-2"><i class="fas fa-arrow-down"></i> 1.10%</span>
                <span class="text-nowrap">Since yesterday</span>
              </p>
            </div>
          </div>
        </div>
        <div class="col-xl-3 col-lg-6">
          <div class="card card-stats mb-4 mb-xl-0">
            <div class="card-body">
              <div class="row">
                <div class="col">
                  <h5 class="card-title text-uppercase text-muted mb-0">Performance</h5>
                  <span class="h2 font-weight-bold mb-0">49,65%</span>
                </div>
                <div class="col-auto">
                  <div class="icon icon-shape bg-info text-white rounded-circle shadow">
                    <i class="fas fa-percent"></i>
                  </div>
                </div>
              </div>
              <p class="mt-3 mb-0 text-muted text-sm">
                <span class="text-success mr-2"><i class="fas fa-arrow-up"></i> 12%</span>
                <span class="text-nowrap">Since last month</span>
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="container-fluid mt--7">
  <div class="row mt-5">
    <div class="col-xl-12 order-xl-1">
      <div class="card bg-secondary shadow">
        <div class="card-header bg-white border-0">
          <div class="row align-items-center">
            <div class="col-8">
              <h3 class="mb-0">Filtros</h3>
            </div>
          </div>
        </div>
        <div class="card-body">
          <form [formGroup]="select" class="form-inline">
            <div class="pl-lg-4">
              <div class="row">
                <div class="col-lg-4">
                  <label >Selecione uma Liga:</label>
                </div>
                <div class="col-lg-8">
                  <label>Data Fim</label>
                </div>
                
              </div>
              <div class="row">
                <div class="col-lg-4">
                  <div class="form-group">
                    <select
                      class="form-control"
                      formControlName="select"
                      (change)="setLiga()"
                    >
                      <option value="">Selecione</option>
                      <option [ngValue]="liga" *ngFor="let liga of competicao">{{ liga.nome }}</option>
                    </select>
                  </div>
                </div>
                <div class="col-lg-6">
                  <div class="form-group">
                    <div >
                      <div class="input-group">
                        <input name="datepicker"
                               class="form-control"
                               ngbDatepicker
                               #datepicker="ngbDatepicker"
                               [autoClose]="'outside'"
                               (dateSelect)="onDateSelection($event)"
                               [displayMonths]="2"
                               [dayTemplate]="t"
                               outsideDays="hidden"
                               [startDate]="fromDate!"
                               tabindex="-1">
                        <ng-template #t let-date let-focused="focused">
                          <span class="custom-day"
                                [class.focused]="focused"
                                [class.range]="isRange(date)"
                                [class.faded]="isHovered(date) || isInside(date)"
                                (mouseenter)="hoveredDate = date"
                                (mouseleave)="hoveredDate = null">
                            {{ date.day }}
                          </span>
                        </ng-template>
                      </div>
                    </div>
                    <div class="form-group col-6">
                      <div class="input-group">
                        <input #dpFromDate
                               class="form-control" placeholder="yyyy-mm-dd"
                               name="dpFromDate"
                               [value]="formatter.format(fromDate)"
                               (input)="fromDate = validateInput(fromDate, dpFromDate.value)">
                        <div class="input-group-append">
                          <!-- <button class="btn btn-outline-secondary calendar" (click)="datepicker.toggle()" type="button"></button> -->
                          <button type="button" placement="top-center" (click)="datepicker.toggle()" triggers="hover focus click"   class="btn btn-outline-secondary calendar"  >
                            <div>
                              <i class="ni ni-calendar-grid-58"></i>
                            </div>
                          </button>
                        </div>
                      </div>
                    </div>
                    <div class="form-group col-6">
                      <div class="input-group">
                        <input #dpToDate
                               class="form-control" placeholder="yyyy-mm-dd"
                               name="dpToDate"
                               [value]="formatter.format(toDate)"
                               (input)="toDate = validateInput(toDate, dpToDate.value)">
                        <div class="input-group-append">
                          <!-- <button class="btn btn-outline-secondary calendar" (click)="datepicker.toggle()" type="button"></button> -->
                          <button type="button" placement="top-center" (click)="datepicker.toggle()" triggers="hover focus click"   class="btn btn-outline-secondary calendar"  >
                            <div>
                              <i class="ni ni-calendar-grid-58"></i>
                            </div>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class=" col-lg-2 text-right">
                  <a (click)="buscar()" class="btn btn-sm btn-primary" >Buscar</a>
                </div>
              </div>
              
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  <div class="row mt-5">
    <div class="col-xl-12 mb-5 mb-xl-0">
      <div class="card shadow">
        <div class="card-header border-0">
          <div class="row align-items-center">
            <div class="col">
              <h3 class="mb-0">Gols</h3>
            </div>
          </div>
        </div>

        <ng-template #thenBlock><i class="fas fa-arrow-up text-success mr-3"></i></ng-template>
        <ng-template #elseBlock><i class="fas fa-arrow-down text-warning mr-3"></i></ng-template>

        <div class="table-responsive">
          <table class="table align-items-center table-flush">
            <thead class="thead-light" *ngIf="mediaCompeticao != null">
              <tr>
                <th colspan="2">Media Liga</th>
                <th class="text-center"><b>{{ mediaCompeticao.mediaGol[3].media }}</b></th>
                <th class="text-center"><b>{{ mediaCompeticao.mediaGol[0].percentualGols0_5 }}%</b></th>
                <th class="text-center"><b>{{ mediaCompeticao.mediaGol[3].percentualGols1_5 }}%</b></th>
                <th class="text-center"><b>{{ mediaCompeticao.mediaGol[3].percentualGols2_5 }}%</b></th>
                <th class="text-center"><b>{{ mediaCompeticao.mediaGol[3].percentualAmbasMarcam }}%</b></th>
                <th></th>
              </tr>
            <tr>
              <th rowspan="2">Confrontos</th>
            </tr>
            <tr>
              <th class="text-center">Tipo</th>
              <th class="text-center">Média</th>
              <th class="text-center">0.5 HT</th>
              <th class="text-center">1.5 FT</th>
              <th class="text-center">2.5 FT</th>
              <th class="text-center">BTTS</th>
              <th class="text-center">Detalhe</th>
            </tr>
            </thead>
            <!-- linha-->
            <tbody  *ngFor="let gols of analise">
                <tr >
                    <th rowspan="2">{{gols.timeCasa}} X {{gols.timeFora}}</th>
                    <td>Media</td>
                    <td> <span *ngIf="calculaMaior(gols.lstGolMediaGols[0].media,mediaCompeticao?.mediaGol[3].media) ; then thenBlock else elseBlock"></span> {{gols.lstGolMediaGols[0].media}}</td>
                    <td> <span *ngIf="calculaMaior(gols.lstGolMediaGols[2].percentualGols0_5,mediaCompeticao?.mediaGol[0].percentualGols0_5 ) ; then thenBlock else elseBlock"></span> {{gols.lstGolMediaGols[2].percentualGols0_5}}%</td>
                    <td> <span *ngIf="calculaMaior(gols.lstGolMediaGols[0].percentualGols1_5,mediaCompeticao?.mediaGol[3].percentualGols1_5 ) ; then thenBlock else elseBlock"></span> {{gols.lstGolMediaGols[0].percentualGols1_5}}%</td>
                    <td> <span *ngIf="calculaMaior(gols.lstGolMediaGols[0].percentualGols2_5,mediaCompeticao?.mediaGol[3].percentualGols2_5 ) ; then thenBlock else elseBlock"></span> {{gols.lstGolMediaGols[0].percentualGols2_5}}%</td>
                    <td> <span *ngIf="calculaMaior(gols.lstGolMediaGols[0].percentualAmbasMarcam,mediaCompeticao?.mediaGol[3].percentualAmbasMarcam ) ; then thenBlock else elseBlock"></span> {{gols.lstGolMediaGols[0].percentualAmbasMarcam}}%</td>
                    <td rowspan="2"><a href="#!" class="btn btn-sm btn-primary">Analisar</a></td>
                </tr>
                 <tr>
                  <td bgcolor="Gainsboro">CxV</td>
                  <td bgcolor="Gainsboro"><span *ngIf="calculaMaior(gols.lstGolMediaGols[1].media,mediaCompeticao?.mediaGol[3].media) ; then thenBlock else elseBlock"></span> {{gols.lstGolMediaGols[1].media}}</td>
                  <td bgcolor="Gainsboro"><span *ngIf="calculaMaior(gols.lstGolMediaGols[3].percentualGols0_5,mediaCompeticao?.mediaGol[0].percentualGols0_5) ; then thenBlock else elseBlock"></span> {{gols.lstGolMediaGols[3].percentualGols0_5}}%</td>
                  <td bgcolor="Gainsboro"><span *ngIf="calculaMaior(gols.lstGolMediaGols[1].percentualGols1_5,mediaCompeticao?.mediaGol[3].percentualGols1_5) ; then thenBlock else elseBlock"></span> {{gols.lstGolMediaGols[1].percentualGols1_5}}%</td>
                  <td bgcolor="Gainsboro"><span *ngIf="calculaMaior(gols.lstGolMediaGols[1].percentualGols2_5,mediaCompeticao?.mediaGol[3].percentualGols2_5) ; then thenBlock else elseBlock"></span> {{gols.lstGolMediaGols[1].percentualGols2_5}}%</td>
                  <td bgcolor="Gainsboro"><span *ngIf="calculaMaior(gols.lstGolMediaGols[1].percentualAmbasMarcam,mediaCompeticao?.mediaGol[3].percentualAmbasMarcam) ; then thenBlock else elseBlock"></span> {{gols.lstGolMediaGols[1].percentualAmbasMarcam}}%</td>
  
                </tr>
            </tbody>
            
          </table>
          <!-- Projects table -->
        </div>
      </div>
      <div class="card shadow">
        <div class="card-header border-0">
          <div class="row align-items-center">
            <div class="col">
              <h3 class="mb-0">Cantos</h3>
            </div>
          </div>
        </div>
        <div class="table-responsive">
          <!-- Projects table -->
          <table class="table align-items-center table-flush">
            <thead class="thead-light" *ngIf="mediaCompeticao != null">
              <tr >
                <th colspan="2">Media Liga</th>
                <th class="text-center"><b>{{mediaCompeticao.mediaCanto[0].mediaTotal}}</b></th>
                <th class="text-center"><b>{{mediaCompeticao.mediaCanto[0].percentual37}}%</b></th>
                <th class="text-center"><b>{{mediaCompeticao.mediaCanto[0].percentual4_5OverHT}}%</b></th>
                <th class="text-center"><b>{{mediaCompeticao.mediaCanto[0].percentual87}}%</b></th>
                <th class="text-center"><b>{{mediaCompeticao.mediaCanto[0].percentual9_5OverFT}}%</b></th>
                <th></th>
              </tr>
              <tr>
                <th rowspan="2">Confrontos</th>
              </tr>
              <tr>
                <th class="text-center">Tipo</th>
                <th class="text-center">Média</th>
                <th class="text-center">37 HT</th>
                <th class="text-center">4.5 HT</th>
                <th class="text-center">87 FT</th>
                <th class="text-center">9.5 FT</th>
                <th class="text-center">Detalhe</th>
              </tr>
            </thead>
            <tbody *ngFor="let cantos of analise">
              <!-- linha-->
              <tr>
                <th rowspan="2">{{cantos.timeCasa}} X {{cantos.timeFora}}</th>
                <td>Media</td>
                <td> <span *ngIf="calculaMaior(cantos.lstCantoMediaCantos[0].mediaTotal,mediaCompeticao.mediaCanto[0].mediaTotal) ; then thenBlock else elseBlock"></span> {{cantos.lstCantoMediaCantos[0].mediaTotal}}</td>
                <td> <span *ngIf="calculaMaior(cantos.lstCantoMediaCantos[0].percentual37,mediaCompeticao.mediaCanto[0].percentual37) ; then thenBlock else elseBlock"></span> {{cantos.lstCantoMediaCantos[0].percentual37}}%</td>
                <td> <span *ngIf="calculaMaior(cantos.lstCantoMediaCantos[0].percentual4_5OverHT,mediaCompeticao.mediaCanto[0].percentual4_5OverHT) ; then thenBlock else elseBlock"></span> {{cantos.lstCantoMediaCantos[0].percentual4_5OverHT}}%</td>
                <td> <span *ngIf="calculaMaior(cantos.lstCantoMediaCantos[0].percentual87,mediaCompeticao.mediaCanto[0].percentual87) ; then thenBlock else elseBlock"></span> {{cantos.lstCantoMediaCantos[0].percentual87}}%</td>
                <td> <span *ngIf="calculaMaior(cantos.lstCantoMediaCantos[0].percentual9_5OverFT,mediaCompeticao.mediaCanto[0].percentual9_5OverFT) ; then thenBlock else elseBlock"></span> {{cantos.lstCantoMediaCantos[0].percentual9_5OverFT}}%</td>
                <td rowspan="2"><span (click)="detalharConfronto('idTimeCasa='+cantos.idTimeCasa+'&idTimeFora='+cantos.idTimeFora+'&idCompeticao='+cantos.idCompeticao)" class="btn btn-sm btn-primary">Analisar</span></td>
              </tr>
                <tr>
                <td bgcolor="Gainsboro">CxV</td>
                <td bgcolor="Gainsboro"><span *ngIf="calculaMaior(cantos.lstCantoMediaCantos[1].mediaTotal,mediaCompeticao.mediaCanto[0].mediaTotal) ; then thenBlock else elseBlock"></span> {{cantos.lstCantoMediaCantos[1].mediaTotal}}</td>
                <td bgcolor="Gainsboro"><span *ngIf="calculaMaior(cantos.lstCantoMediaCantos[1].percentual37,mediaCompeticao.mediaCanto[0].percentual37) ; then thenBlock else elseBlock"></span> {{cantos.lstCantoMediaCantos[1].percentual37}}%</td>
                <td bgcolor="Gainsboro"><span *ngIf="calculaMaior(cantos.lstCantoMediaCantos[1].percentual4_5OverHT,mediaCompeticao.mediaCanto[0].percentual4_5OverHT) ; then thenBlock else elseBlock"></span> {{cantos.lstCantoMediaCantos[1].percentual4_5OverHT}}%</td>
                <td bgcolor="Gainsboro"><span *ngIf="calculaMaior(cantos.lstCantoMediaCantos[1].percentual87,mediaCompeticao.mediaCanto[0].percentual87) ; then thenBlock else elseBlock"></span> {{cantos.lstCantoMediaCantos[1].percentual87}}%</td>
                <td bgcolor="Gainsboro"><span *ngIf="calculaMaior(cantos.lstCantoMediaCantos[1].percentual9_5OverFT,mediaCompeticao.mediaCanto[0].percentual9_5OverFT) ; then thenBlock else elseBlock"></span> {{cantos.lstCantoMediaCantos[1].percentual9_5OverFT}}%</td>
              </tr>
          </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>

</div>
